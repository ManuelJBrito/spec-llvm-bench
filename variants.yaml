# variants.yaml

# --- Profile build ---
- id: prof
  flags: >
    -mllvm -skip-gvn
    -gmlt -fno-omit-frame-pointer

# --- Baseline ---
- id: NoGVN-greedy
  gvn_base: NoGVN
  regalloc: greedy
  flags: >
    -mllvm -skip-gvn
    -mllvm -regalloc=greedy

- id: NoGVN-fast
  gvn_base: NoGVN
  regalloc: fast
  flags: >
    -mllvm -skip-gvn
    -mllvm -regalloc=fast

- id: NoGVN-pbqp
  gvn_base: NoGVN
  regalloc: pbqp
  flags: >
    -mllvm -skip-gvn
    -mllvm -regalloc=pbqp

# --- GVNPRE (simpl=1, pre=0, regalloc varies) ---
- id: GVNPRE-s1-p0-greedy
  gvn_base: GVNPRE
  simpl: 1
  pre: 0
  regalloc: greedy
  flags: >
    -mllvm -enable-pre=false
    -mllvm -regalloc=greedy

- id: GVNPRE-s1-p0-fast
  gvn_base: GVNPRE
  simpl: 1
  pre: 0
  regalloc: fast
  flags: >
    -mllvm -enable-pre=false
    -mllvm -regalloc=fast

- id: GVNPRE-s1-p0-pbqp
  gvn_base: GVNPRE
  simpl: 1
  pre: 0
  regalloc: pbqp
  flags: >
    -mllvm -enable-pre=false
    -mllvm -regalloc=pbqp


# --- GVNPRE ablation: nonlocal load elim off ---
- id: GVNPRE-s1-p0-greedy-no-nlldelim
  gvn_base: GVNPRE
  simpl: 1
  pre: 0
  regalloc: greedy
  flags: >
    -mllvm -enable-pre=false
    -mllvm -enable-gvn-nonlocal-load-elim=false
    -mllvm -regalloc=greedy

# --- NewGVN optimistic (simpl=1, pre=0, regalloc varies) ---
- id: NewGVN-opt-s1-p0-greedy
  gvn_base: NewGVN
  assumption: opt
  simpl: 1
  pre: 0
  regalloc: greedy
  flags: >
    -mllvm -enable-newgvn=true
    -mllvm -regalloc=greedy

- id: NewGVN-opt-s1-p0-fast
  gvn_base: NewGVN
  assumption: opt
  simpl: 1
  pre: 0
  regalloc: fast
  flags: >
    -mllvm -enable-newgvn=true
    -mllvm -regalloc=fast

- id: NewGVN-opt-s1-p0-pbqp
  gvn_base: NewGVN
  assumption: opt
  simpl: 1
  pre: 0
  regalloc: pbqp
  flags: >
    -mllvm -enable-newgvn=true
    -mllvm -regalloc=pbqp